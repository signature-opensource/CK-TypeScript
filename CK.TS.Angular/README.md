# CK-TS-Angular
Supports Angular (v18+) by enabling the @local/ck-gen code to interact with an Angular host application.

## Testing with Jest

https://medium.com/@ayushgrwl365/jesting-your-angular-app-simplifying-unit-testing-with-jest-324f5bb9e2df


## Usage
Based on a minimal Angular initial application generated by:

`ng new AngularDemo ---style=less --package-manager=yarn --interactive=false --standalone=true --skip-install=true --skip-git=true`

Installing this package generates a `ck-gen/CK/Angular/CKGenAppModule.ts` that:
- must be imported in the application component (in file `src/app/app.component.ts`):
```typescript
import { Component } from '@angular/core';
import { RouterOutlet } from '@angular/router';
import { CKGenAppModule } from '@local/ck-gen';

@Component({
  selector: 'app-root',
  standalone: true,
  imports: [RouterOutlet, CKGenAppModule],
  templateUrl: './app.component.html',
  styleUrl: './app.component.less'
})
export class AppComponent {
  title = 'My Application';
}
```
- has a Providers static fields that must be appended to the "root" injector (in file `src/app/app.config.ts`):
```typescript
import { ApplicationConfig, provideZoneChangeDetection } from '@angular/core';
import { provideRouter } from '@angular/router';

import { routes } from './app.routes';
import { CKGenAppModule } from '@local/ck-gen'

export const appConfig: ApplicationConfig = {
  providers: [provideZoneChangeDetection({ eventCoalescing: true }), provideRouter(routes), ...CKGenAppModule.Providers],
};
```

A `ck-gen/CK/Angular/routes.ts` is also generated: the `CKGenAppModule` is also a "routed component". These routes
must be included in the application routes (in file `src/app/app.routes.ts`):

```typescript
import { Routes } from '@angular/router';
import CKGenRoutes from '@local/ck-gen/CK/Angular/routes';

export const routes: Routes = [
    ...CKGenRoutes,
];
```

## How it works
The `/ck-gen/CK/Angular/CKGenAppModule.ts` file has 2 roles:
- For NgModule (if they are used), this `CKGenAppModule` module acts as a simple re-exporter of code generated modules.
- For Dependency Injection, it enables generated providers to be registered in the host application ("root") provider of services.
```typescript
import { NgModule, Provider } from '@angular/core';

@NgModule({
    imports: [
    // Registered NgModules come here.
    ],
    exports: [
    // Registered NgModules also come here.
]
  })
export class CKGenAppModule {
   static Providers : Provider[] = [
    // Registered providers come here.
   ];
}
```

The `/ck-gen/CK/Angular/routes.ts` file supports the routed components.
```typescript
export default [
    // RoutedComponents' routes come here.
   ];
```


